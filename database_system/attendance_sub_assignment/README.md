**[데이터베이스 시스템] 2021년 1학기 출석대체과제물 (홀수학번)**

## **영화 관리를 위한 데이터베이스 구축을 위한 요구 사항**

(주)영화광은 국내에서 상영․유통되는 영화 컨텐츠에 대한 종합적인 정보를 관리하기 위해 데이터베이스 시스템을 구축하고자 한다. 영화에 대하여 영화코드번호, 제목, 제작년도, 제작국가, 상영시간, 개봉일자, 제작사, 배급사 정보를 저장한다. 감독에 대해서는 등록번호, 이름, 성별,  출생일, 출생지, 학력사항을 저장한다. 배우에 대해서는 배우번호, 생년월일, 이름, 성별, 출생지, 키, 몸무게, 혈액형 정보를 저장한다. 혈액형에는 'A', 'B', 'AB', 'O' , 성별에는 '남', '여' 값만 입력될 수 있다. 한 영화에 여러 명의 감독이 참여할 수 있으며, 감독 또한 여러 영화에 참여할 수 있다. 감독과 유사하게 한 영화에 여러 명의 배우가 출연할 수 있으며, 출연 시 배역이 정해진다. 한 배우 또한 여러 영화에 출연할 수 있다. 장르에 대해 장르코드와 장르명이 저장되며, 각 영화에는 한 장르코드만 부여되고, 한 장르코드는 여러 영화에 부여될 수 있다.

**-** **문제 -**

문1) 요구사항에 대한 ER 다이어그램 작성 (5점)

문2) ER 다이어그램을 관계형 모델 스키마로 변환(기본키,  기본키-외래키 참조관계 등의 제약조건 명시) (10점)

문3) 다음 정보를 출력하기 위한 SQL문을 작성 (각 5점)

	가) 배우의 이름, 성별, 출생지를 출력하시오.
    나) 현재 날짜를 기준으로 최근 3년 안에 제작된 영화의 제목, 제작국가, 개봉일, 제작사, 배급사를 출력하시오.
    다) 이름이 ‘명감독’인 감독이 촬영한 영화의 제목을 출력하시오.


**문1) 요구사항에 대한 ER 다이어그램 작성 (5점)**
<img src="C:/workspace/Git/KNOU/database_system/attendance_sub_assignment/imgs/1.png" width="700">

**문2) ER 다이어그램을 관계형 모델 스키마로 변환(기본키,  기본키-외래키 참조관계 등의 제약조건 명시) (10점)**

MySQL 워크벤치 > Database > Forward Engineer 이용
<img src="C:/workspace/Git/KNOU/database_system/attendance_sub_assignment/imgs/2.png" width="700">

기본키, 외래키, 참조관계 등의 모든 제약조건 명시.
<img src="C:/workspace/Git/KNOU/database_system/attendance_sub_assignment/imgs/3.png" width="700">
<img src="C:/workspace/Git/KNOU/database_system/attendance_sub_assignment/imgs/4.png" width="700">

프로세스가 모두 끝나면, 관계형 모델 스키마로 생성된 것을 확인할 수 있다.
<img src="C:/workspace/Git/KNOU/database_system/attendance_sub_assignment/imgs/5.png" width="700">

**문3) 다음 정보를 출력하기 위한 SQL문을 작성 (각 5점)**
	
	가) 배우의 이름, 성별, 출생지를 출력하시오.
	
    SELECT 이름, 성별, 출생지 FROM `mydb`.`배우`;
	SELECT 이름, 성별, 출생지 FROM 배우;
	* 둘 다 실행됨. 스키마명은 생략 가능

실행결과

    나) 현재 날짜를 기준으로 최근 3년 안에 제작된 영화의 제목, 제작국가, 개봉일, 제작사, 배급사를 출력하시오.
    SELECT  제목, 제작국가, 개봉일자 AS 개봉일, 제작사, 배급사
    FROM 영화
    WHERE 제작년도 > (NOW() - INTERVAL 3 YEAR);

실행결과

다) 이름이 ‘명감독’인 감독이 촬영한 영화의 제목을 출력하시오.

양쪽 테이블 모두에서 일치하는 레코드를 반환하는INNER JOIN문을 활용한다. 감독 테이블에서 이름이 명감독인 감독의 감독코드와 연결된 레코드를 감독참여 테이블에서 찾고, 해당 레코드에서 조회되는 영화코드번호와 매칭되는 영화 제목을 영화테이블에서 조회, 반환한다.

    SELECT
	    제목
    FROM
	    영화
    INNER JOIN 감독참여 ON 감독참여.영화_영화코드번호 = 영화.영화코드번호
    INNER JOIN 감독 ON 감독.등록번호 = 감독참여.감독_등록번호 AND 감독.이름 = '명감독';
